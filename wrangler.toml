name = "game"
main = "src/index.js"
compatibility_date = "2025-11-25"

# Workers 配置
workers_dev = true

# 自定义域名路由（在 Cloudflare Dashboard 中配置 DNS）
# 域名: game.hxorz.cn
# 配置步骤:
# 1. 在 Cloudflare DNS 添加 CNAME 记录: game.hxorz.cn -> game.snnuisdc.workers.dev
# 2. 在 Workers & Pages > game > Settings > Domains & Routes 添加自定义域名

# 可观测性配置
[observability]
enabled = false

[observability.logs]
enabled = true
invocation_logs = true

# KV 命名空间绑定（用于用户进度、访客统计、排行榜）
# 重要：用户进度和排行榜功能需要KV存储，必须启用！
#
# 配置方式1: 通过 Cloudflare Dashboard（推荐用于GitHub自动部署）
#   1. Dashboard → Workers & Pages → KV → Create namespace → 输入 STATS_KV
#   2. Dashboard → Workers & Pages → game → Settings → Variables → KV Namespace Bindings
#   3. Add binding: Variable name = STATS_KV, 选择刚创建的 namespace
#   4. 提交代码到GitHub触发重新部署
#
# 配置方式2: 通过 wrangler.toml（推荐用于本地CLI部署）
#   1. 运行: wrangler kv:namespace create "STATS_KV"
#   2. 取消下面的注释并填入返回的 id
#
[[kv_namespaces]]
binding = "STATS_KV"
id = "8ae1c2569cdd4a6ea50ad81873a26f74"

# 开发服务器配置
[dev]
ip = "0.0.0.0"
port = 8787
local_protocol = "http"

# 部署配置说明
# 1. 本地开发: npm run dev (或 wrangler dev)
# 2. 部署: npm run deploy (或 wrangler deploy)
#
# 可选：启用访客统计功能
# 1. 创建 KV 命名空间: wrangler kv:namespace create "STATS_KV"
# 2. 创建预览命名空间: wrangler kv:namespace create "STATS_KV" --preview
# 3. 取消注释上面的 [[kv_namespaces]] 块，填入返回的 id
